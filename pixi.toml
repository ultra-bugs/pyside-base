[workspace]
name = "pyside_base"
version = "0.0.0"
description = "Qt/PySide6 application base with task system and utilities"
channels = ["conda-forge"]
platforms = ["win-64", "linux-64", "osx-64", "osx-arm64"]

# Core runtime deps
[dependencies]
python = ">=3.10"
pyside6 = ">=6.5.0"
pixi-pycharm = ">=0.0.10,<0.0.11"

# PyPI deps (not available or not preferred from conda-forge for this project)
[pypi-dependencies]
python-dotenv = ">=1.0.0"
loguru = ">=0.7.0"
pyqtdarktheme = ">=2.1.0"
case-converter = ">=1.2.0"
python-box = ">=7.3"
curl_cffi = "*"
numpy = ">=2.4.1, <3"
#drissionpage = ">=4.1.1.2, <5"

# Dev tools for local development (enabled by default via the default environment below)
[feature.dev.pypi-dependencies]
ruff = "*"

[feature.tests.pypi-dependencies]
ruff = "*"
pytest = "*"
mypy = "*"

[environments]
default = { features = ["dev", "tests"] }

[tasks]
# App run
start = "python main.py"
dev = { depends-on = ["compile-ui", "start"] }

# Project scripts
compile-ui = "python scripts/compile_ui.py"
generate = "python scripts/generate.py"
set-app-info = "python scripts/set_app_info.py"

# Quality & tests
test = "pytest -q"
lint = "ruff check ."
lint-fix = "ruff check . --fix"
format = "ruff format ."
format-check = "ruff format --check ."
type-check = "mypy ."
check = { depends-on = ["lint", "type-check", "test"] }

# Utilities
check-pixi = "python -c \"import sys,platform; print('Pixi OK'); print('Python:', sys.version); print('Platform:', platform.platform())\""
clean-logs = "python -c \"import shutil, os; p='data\\\\logs'; shutil.rmtree(p, ignore_errors=True); os.makedirs(p, exist_ok=True); print('Cleaned logs in', p)\""

[target.win-64.pypi-dependencies]
pywin32 = ">=311, <312"
